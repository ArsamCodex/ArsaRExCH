@page "/BtcCHart"
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<div id="tradingview-chart"></div>
<p>Current BTC Price: @currentPrice</p>

@code {
    private string currentPrice = "Loading...";

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            InitializeTradingViewChart();
        }
    }

    private void InitializeTradingViewChart()
    {
        // JavaScript interop to initialize the TradingView chart
        _ = JSRuntime.InvokeVoidAsync("initializeTradingViewChart", DotNetObjectReference.Create(this));
    }

    [JSInvokable]
    public void UpdatePrice(string price)
    {
        currentPrice = price;
        StateHasChanged(); // Refresh the UI
    }
}